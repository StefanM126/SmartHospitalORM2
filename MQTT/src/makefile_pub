CC       = g++
LIBS     = -lmosquittopp
CXXFLAGS = -g -Wall -c -I../inc

IDIR = ../inc
ODIR = ../obj
SDIR = src

FNAME = pub

_OBJ = pubmain.o publisher.o sensor.o
OBJ  = $(patsubst %, ${ODIR}/%, ${_OBJ})

_DEPS = sensor.h publisher.h
DEPS  = $(patsubst %, ${IDIR}/%, ${_DEPS})


.PHONY: all
all: ${FNAME}

${FNAME}: ${OBJ}
	${CC} ${OBJ} -o $@ ${LIBS}
	
${ODIR}/%.o : %.cpp ${DEPS}
	${CC} ${CXXFLAGS} -o $@ $<
	

.PHONY: clean
clean: 
	rm ${ODIR}/*.o ${FNAME}
	
	
